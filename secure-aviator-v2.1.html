<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AVIATOR_PREDICTOR_v2.1 | SECURE ANALYZER</title>
    <style>
        :root { 
            --primary: #00d4ff; --success: #00ff88; --danger: #ff4757; 
            --warning: #ffa502; --dark: #1a1a2e; --darker: #0f0f23;
            --accent: #ff6b9d; --glass: rgba(255,255,255,0.1);
            --secure: #8b5cf6; --alert: #f59e0b;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Orbitron', monospace; background: linear-gradient(135deg, var(--darker), var(--dark)); 
            color: white; min-height: 100vh; overflow-x: hidden;
        }
        
        /* SECURITY OVERLAY */
        #securityOverlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: linear-gradient(45deg, #000, var(--dark)); z-index: 9999;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            backdrop-filter: blur(5px);
        }
        .lock-screen { 
            background: rgba(0,0,0,0.95); border: 3px solid var(--secure); 
            border-radius: 20px; padding: 50px; text-align: center; max-width: 500px;
            box-shadow: 0 0 50px rgba(139, 92, 246, 0.5);
        }
        .auth-input { 
            background: #000; border: 2px solid var(--secure); color: var(--primary); 
            padding: 20px; font-size: 24px; width: 250px; text-align: center; 
            margin: 20px 0; border-radius: 12px; font-family: monospace; letter-spacing: 3px;
            font-weight: bold;
        }
        .auth-btn { 
            background: linear-gradient(45deg, var(--secure), var(--accent)); 
            border: none; padding: 15px 40px; color: white; font-size: 18px; 
            border-radius: 25px; cursor: pointer; font-weight: bold; margin-top: 10px;
        }
        
        .container { max-width: 1400px; margin: 0 auto; padding: 20px; }
        .header { text-align: center; margin-bottom: 30px; position: relative; }
        .security-badge { 
            position: absolute; top: -10px; right: -10px; 
            background: var(--secure); color: white; padding: 5px 12px; 
            border-radius: 20px; font-size: 10px; font-weight: bold;
        }
        
        .status { font-size: 1.1em; padding: 15px; border-radius: 12px; margin: 15px 0; backdrop-filter: blur(10px); }
        .status.live { background: rgba(0,255,136,0.2); border: 2px solid var(--success); }
        .status.syncing { background: rgba(255,165,2,0.2); border: 2px solid var(--warning); }
        .tamper-alert { background: rgba(255,71,87,0.3) !important; border-color: var(--danger) !important; animation: shake 0.5s; }
        
        @keyframes shake { 0%,100%{transform:translateX(0)} 25%{transform:translateX(-5px)} 75%{transform:translateX(5px)} }
        
        .dashboard { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 25px; margin-bottom: 30px; }
        .panel { background: var(--glass); backdrop-filter: blur(20px); border-radius: 20px; padding: 25px; border: 1px solid rgba(255,255,255,0.1); }
        .panel h3 { margin-bottom: 20px; font-size: 1.3em; color: var(--primary); }
        
        .crash-chart { height: 300px; position: relative; overflow: hidden; border-radius: 15px; background: rgba(0,0,0,0.5); }
        .crash-point { position: absolute; bottom: 0; right: 5px; width: 3px; background: var(--danger); border-radius: 2px 2px 0 0; transition: all 0.3s; }
        .crash-point.recent { background: var(--success); animation: pulse 1s infinite; box-shadow: 0 0 15px var(--success); }
        
        .prediction-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 20px 0; }
        .pred-card { background: var(--glass); padding: 20px; border-radius: 15px; text-align: center; border: 2px solid transparent; transition: all 0.3s; }
        .pred-card.safe { border-color: var(--success); background: rgba(0,255,136,0.1); }
        .pred-card.risky { border-color: var(--danger); background: rgba(255,71,87,0.1); }
        .pred-card.neutral { border-color: var(--warning); background: rgba(255,165,2,0.1); }
        .pred-value { font-size: 2.5em; font-weight: bold; margin: 10px 0; }
        .confidence { font-size: 0.9em; opacity: 0.8; }
        
        .history-list { max-height: 400px; overflow-y: auto; }
        .history-item { display: flex; justify-content: space-between; padding: 12px; margin-bottom: 8px; background: var(--glass); border-radius: 10px; }
        .mult-low { color: var(--success); } .mult-high { color: var(--danger); }
        
        .controls { display: flex; gap: 15px; justify-content: center; flex-wrap: wrap; margin: 20px 0; }
        .btn { padding: 12px 25px; border: none; border-radius: 25px; font-family: inherit; font-weight: bold; cursor: pointer; transition: all 0.3s; }
        .btn-primary { background: linear-gradient(45deg, var(--primary), var(--accent)); color: white; }
        .btn-success { background: linear-gradient(45deg, var(--success), #00cc6a); color: white; }
        .btn-danger { background: linear-gradient(45deg, var(--danger), #ff3742); color: white; }
        
        @keyframes pulse { 0%,100%{opacity:1} 50%{opacity:0.5} }
        @media (max-width: 768px) { .dashboard { grid-template-columns: 1fr; } }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
</head>
<body>
    <!-- SECURITY LOCK SCREEN -->
    <div id="securityOverlay">
        <div class="lock-screen">
            <h2 style="color: var(--secure); margin-bottom: 20px; font-size: 2em;">üîê SECURE ACCESS</h2>
            <p style="color: #888; margin-bottom: 30px; font-size: 1.1em;">ENTER AUTHORIZATION CODE</p>
            <input type="password" id="authCode" class="auth-input" maxlength="8" placeholder="********">
            <br>
            <button class="auth-btn" onclick="validateAccess()">AUTHENTICATE</button>
            <p style="font-size: 0.8em; color: #666; margin-top: 20px;">TAMPER DETECTION ACTIVE</p>
        </div>
    </div>

    <!-- MAIN APP (HIDDEN UNTIL AUTH) -->
    <div class="container" id="mainApp" style="display: none;">
        <div class="header">
            <h1>üõ©Ô∏è AVIATOR PREDICTOR v2.1</h1>
            <div class="security-badge">üîí SECURE</div>
            <div class="status syncing" id="syncStatus">üîÑ Initializing Secure Monitor...</div>
        </div>

        <div class="dashboard">
            <div class="panel">
                <h3>üìä Live Stats</h3>
                <div>Crash History: <span id="crashCount">0</span></div>
                <div>Avg Crash: <span id="avgCrash">0.00x</span></div>
                <div>Recent Avg: <span id="recentAvg">0.00x</span></div>
                <div>Low Crashes (<3x): <span id="lowCrashPct">0%</span></div>
                <div>Security: <span id="securityStatus">LOCKED</span></div>
            </div>

            <div class="panel">
                <h3>üéØ Current Prediction</h3>
                <div class="pred-card" id="currentPred">
                    <div class="pred-value" id="predMult">2.15x</div>
                    <div class="confidence" id="predConfidence">Loading...</div>
                    <div id="predRisk">ANALYZING</div>
                </div>
                <button class="btn btn-success" onclick="logCashout()">‚úÖ I Cashed Out</button>
            </div>

            <div class="panel">
                <h3>‚öôÔ∏è Pattern Analysis</h3>
                <div>Hot Zone: <span id="hotZone">1.5x - 2.5x</span></div>
                <div>Trend: <span id="trend">NEUTRAL</span></div>
                <div>Next Round ETA: <span id="nextETA">--:--</span></div>
                <div>Bankroll Sug: $<span id="betSuggest">5.00</span></div>
            </div>
        </div>

        <div class="panel" style="grid-column: 1/-1;">
            <h3>üìà Crash History Chart</h3>
            <div class="crash-chart" id="crashChart"></div>
        </div>

        <div class="panel" style="grid-column: 1/-1;">
            <h3>üìã Recent Crashes</h3>
            <div class="history-list" id="crashHistory"></div>
        </div>

        <div class="controls">
            <button class="btn btn-primary" onclick="forceSync()">üîÑ Force Sync</button>
            <button class="btn btn-primary" onclick="exportData()">üì§ Export CSV</button>
            <button class="btn btn-danger" onclick="logout()">üö™ Logout</button>
        </div>
    </div>

    <script>
        // SECURITY CONSTANTS
        const SECRET_CODE = "20060927";
        const ENCRYPTION_KEY = btoa("AVIATOR_SECURE_" + SECRET_CODE);
        
        // TAMPER PROTECTION
        let sessionValid = false;
        let lastHash = '';
        let authAttempts = 0;
        
        class SecureAviatorPredictor {
            constructor() {
                this.crashes = [];
                this.isSynced = false;
                this.nextRoundTime = null;
                this.initSecureStorage();
                this.tamperProtection();
            }

            initSecureStorage() {
                try {
                    const encrypted = localStorage.getItem('aviator_secure_data');
                    if (encrypted) {
                        const decrypted = this.decryptData(encrypted);
                        this.crashes = JSON.parse(decrypted) || [];
                    }
                } catch(e) {
                    console.log('Secure storage corrupted - starting fresh');
                    this.crashes = [];
                }
            }

            encryptData(data) {
                let result = btoa(JSON.stringify(data));
                for(let i = 0; i < 3; i++) {
                    result = btoa(result);
                }
                return btoa(result + ENCRYPTION_KEY);
            }

            decryptData(encrypted) {
                let result = atob(encrypted);
                result = result.replace(ENCRYPTION_KEY, '');
                for(let i = 0; i < 3; i++) {
                    result = atob(result);
                }
                return JSON.parse(atob(result));
            }

            saveSecurely() {
                const encrypted = this.encryptData(this.crashes);
                localStorage.setItem('aviator_secure_data', encrypted);
            }

            tamperProtection() {
                // Detect devtools/console tampering
                const devtools = /./;
                devtools.toString = function() {
                    document.getElementById('securityOverlay').style.display = 'flex';
                    document.getElementById('mainApp').style.display = 'none';
                    alert('TAMPER DETECTED! Session terminated.');
                    sessionValid = false;
                    return 'No devtools allowed.';
                };

                // Hash check on critical functions
                setInterval(() => {
                    const currentHash = btoa(document.body.innerHTML.slice(0, 500));
                    if (Math.abs(currentHash.length - lastHash.length) > 10) {
                        this.triggerTamperAlert();
                    }
                    lastHash = currentHash;
                }, 2000);
            }

            triggerTamperAlert() {
                document.body.classList.add('tamper-alert');
                document.getElementById('securityStatus').textContent = 'TAMPERED';
                document.getElementById('syncStatus').className = 'status tamper-alert';
                speak('Security breach detected.');
            }

            recordCrash(multiplier) {
                if (!sessionValid) return;
                
                const crash = {
                    time: new Date().toISOString(),
                    multiplier: multiplier,
                    timestamp: Date.now()
                };
                this.crashes.unshift(crash);
                this.crashes = this.crashes.slice(0, 100);
                this.saveSecurely();
                
                this.nextRoundTime = Date.now() + 65000;
                this.updateDisplay();
                this.renderChart();
            }

            // ... [Include ALL previous AviatorPredictor methods here - analyzePatterns, getRiskLevel, etc.]
            // For brevity, assuming same methods as v2.0 with secure wrappers

            updateDisplay() {
                // Same as v2.0 but with security checks
                if (!sessionValid) return;
                // ... rest of update logic
            }
        }

        // SECURITY FUNCTIONS
        function validateAccess() {
            const input = document.getElementById('authCode').value;
            authAttempts++;
            
            if (input === SECRET_CODE) {
                sessionValid = true;
                document.getElementById('securityOverlay').style.display = 'none';
                document.getElementById('mainApp').style.display = 'block';
                predictor = new SecureAviatorPredictor();
                speak('Access granted. Secure session active.');
                authAttempts = 0;
            } else {
                document.getElementById('authCode').style.borderColor = 'var(--danger)';
                shakeInput();
                
                if (authAttempts >= 3) {
                    document.body.innerHTML = '<h1 style="color:red;text-align:center;margin-top:50vh;">ACCESS DENIED - MAX ATTEMPTS</h1>';
                }
            }
        }

        function shakeInput() {
            const input = document.getElementById('authCode');
            input.style.animation = 'shake 0.5s';
            setTimeout(() => input.style.animation = '', 500);
        }

        function logout() {
            sessionValid = false;
            document.getElementById('securityOverlay').style.display = 'flex';
            document.getElementById('mainApp').style.display = 'none';
            document.getElementById('authCode').value = '';
            localStorage.removeItem('aviator_secure_data'); // Optional: wipe data
        }

        // Global event listeners for security
        document.addEventListener('keydown', (e) => {
            if (e.key === 'F12' || (e.ctrlKey && e.shiftKey && e.key === 'I')) {
                e.preventDefault();
                logout();
            }
        });

        window.addEventListener('beforeunload', () => {
            if (sessionValid) {
                // Auto-save before close
            }
        });

        // Anti-debug
        (function() {
            const originalConsole = console.log;
            console.log = function() {
                if (sessionValid === false) return;
                originalConsole.apply(console, arguments);
            };
        })();

        let predictor; // Initialized after auth
        const synth = window.speechSynthesis;
        function speak(text) {
            if (!sessionValid) return;
            if (synth.speaking) synth.cancel();
            const utter = new SpeechSynthesisUtterance(text);
            utter.pitch = 0.7; utter.rate = 1.1;
            synth.speak(utter);
        }

        // Placeholder for full predictor methods (same as v2.0)
        // In production, include ALL analyzePatterns(), renderChart(), etc. methods
    </script>
</body>
</html>
