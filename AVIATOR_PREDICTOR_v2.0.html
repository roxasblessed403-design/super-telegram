<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AVIATOR_PREDICTOR_v2.0 | SPINCITY ANALYZER</title>
    <style>
        :root { 
            --primary: #00d4ff; --success: #00ff88; --danger: #ff4757; 
            --warning: #ffa502; --dark: #1a1a2e; --darker: #0f0f23;
            --accent: #ff6b9d; --glass: rgba(255,255,255,0.1);
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Orbitron', monospace; background: linear-gradient(135deg, var(--darker), var(--dark)); 
            color: white; min-height: 100vh; overflow-x: hidden;
        }
        .container { max-width: 1400px; margin: 0 auto; padding: 20px; }
        
        .header { text-align: center; margin-bottom: 30px; }
        .header h1 { font-size: 2.5em; background: linear-gradient(45deg, var(--primary), var(--accent)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .status { font-size: 1.1em; padding: 15px; border-radius: 12px; margin: 15px 0; backdrop-filter: blur(10px); }
        .status.live { background: rgba(0,255,136,0.2); border: 2px solid var(--success); }
        .status.syncing { background: rgba(255,165,2,0.2); border: 2px solid var(--warning); }
        
        .dashboard { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 25px; margin-bottom: 30px; }
        .panel { background: var(--glass); backdrop-filter: blur(20px); border-radius: 20px; padding: 25px; border: 1px solid rgba(255,255,255,0.1); }
        .panel h3 { margin-bottom: 20px; font-size: 1.3em; color: var(--primary); }
        
        .crash-chart { height: 300px; position: relative; overflow: hidden; border-radius: 15px; background: rgba(0,0,0,0.5); }
        .crash-point { position: absolute; bottom: 0; right: 5px; width: 3px; background: var(--danger); border-radius: 2px 2px 0 0; transition: all 0.3s; }
        .crash-point.recent { background: var(--success); animation: pulse 1s infinite; box-shadow: 0 0 15px var(--success); }
        
        .prediction-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 20px 0; }
        .pred-card { background: var(--glass); padding: 20px; border-radius: 15px; text-align: center; border: 2px solid transparent; transition: all 0.3s; }
        .pred-card.safe { border-color: var(--success); background: rgba(0,255,136,0.1); }
        .pred-card.risky { border-color: var(--danger); background: rgba(255,71,87,0.1); }
        .pred-card.neutral { border-color: var(--warning); background: rgba(255,165,2,0.1); }
        .pred-value { font-size: 2.5em; font-weight: bold; margin: 10px 0; }
        .confidence { font-size: 0.9em; opacity: 0.8; }
        
        .history-list { max-height: 400px; overflow-y: auto; }
        .history-item { display: flex; justify-content: space-between; padding: 12px; margin-bottom: 8px; background: var(--glass); border-radius: 10px; }
        .mult-low { color: var(--success); } .mult-high { color: var(--danger); }
        
        .controls { display: flex; gap: 15px; justify-content: center; flex-wrap: wrap; margin: 20px 0; }
        .btn { padding: 12px 25px; border: none; border-radius: 25px; font-family: inherit; font-weight: bold; cursor: pointer; transition: all 0.3s; }
        .btn-primary { background: linear-gradient(45deg, var(--primary), var(--accent)); color: white; }
        .btn-success { background: linear-gradient(45deg, var(--success), #00cc6a); color: white; }
        
        @keyframes pulse { 0%,100%{opacity:1} 50%{opacity:0.5} }
        @media (max-width: 768px) { .dashboard { grid-template-columns: 1fr; } }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üõ©Ô∏è AVIATOR PREDICTOR v2.0</h1>
            <div class="status syncing" id="syncStatus">üîÑ Initializing SpinCity Monitor...</div>
        </div>

        <div class="dashboard">
            <div class="panel">
                <h3>üìä Live Stats</h3>
                <div>Crash History: <span id="crashCount">0</span></div>
                <div>Avg Crash: <span id="avgCrash">0.00x</span></div>
                <div>Recent Avg: <span id="recentAvg">0.00x</span></div>
                <div>Low Crashes (<3x): <span id="lowCrashPct">0%</span></div>
                <div>Sync Status: <span id="liveStatus">OFFLINE</span></div>
            </div>

            <div class="panel">
                <h3>üéØ Current Prediction</h3>
                <div class="pred-card" id="currentPred">
                    <div class="pred-value" id="predMult">2.15x</div>
                    <div class="confidence" id="predConfidence">Loading...</div>
                    <div id="predRisk">ANALYZING</div>
                </div>
                <button class="btn btn-success" onclick="logCashout()">‚úÖ I Cashed Out</button>
            </div>

            <div class="panel">
                <h3>‚öôÔ∏è Pattern Analysis</h3>
                <div>Hot Zone: <span id="hotZone">1.5x - 2.5x</span></div>
                <div>Trend: <span id="trend">NEUTRAL</span></div>
                <div>Next Round ETA: <span id="nextETA">--:--</span></div>
                <div>Bankroll Sug: $<span id="betSuggest">5.00</span></div>
            </div>
        </div>

        <div class="panel" style="grid-column: 1/-1;">
            <h3>üìà Crash History Chart</h3>
            <div class="crash-chart" id="crashChart"></div>
        </div>

        <div class="panel" style="grid-column: 1/-1;">
            <h3>üìã Recent Crashes</h3>
            <div class="history-list" id="crashHistory"></div>
        </div>

        <div class="controls">
            <button class="btn btn-primary" onclick="forceSync()">üîÑ Force Sync</button>
            <button class="btn btn-primary" onclick="clearData()">üóëÔ∏è Clear Data</button>
            <button class="btn btn-primary" onclick="exportData()">üì§ Export CSV</button>
        </div>
    </div>

    <script>
        class AviatorPredictor {
            constructor() {
                this.crashes = JSON.parse(localStorage.getItem('aviator_crashes')) || [];
                this.isSynced = false;
                this.nextRoundTime = null;
                this.init();
            }

            init() {
                this.startSpinCityMonitor();
                this.updateDisplay();
                setInterval(() => this.updateDisplay(), 1000);
                setInterval(() => this.analyzePatterns(), 5000);
            }

            startSpinCityMonitor() {
                const observer = new MutationObserver(mutations => {
                    mutations.forEach(mutation => {
                        const multiplierEls = document.querySelectorAll('.multiplier, .crash-value, .coefficient, [class*="mult"], [class*="crash"]');
                        multiplierEls.forEach(el => {
                            const text = (el.textContent || el.innerText).trim();
                            const match = text.match(/(\d+(?:\.\d+)?)x?/i);
                            if (match) {
                                const mult = parseFloat(match[1]);
                                if (mult >= 999 || el.classList.contains('crashed') || text.includes('CRASH')) {
                                    this.recordCrash(mult);
                                }
                            }
                        });
                    });
                });

                observer.observe(document.body, {
                    childList: true,
                    subtree: true,
                    attributes: true,
                    attributeFilter: ['class', 'style']
                });

                document.getElementById('liveStatus').textContent = 'MONITORING';
                document.getElementById('syncStatus').textContent = 'üü¢ LIVE SYNC';
                document.getElementById('syncStatus').className = 'status live';
                this.isSynced = true;
            }

            recordCrash(multiplier) {
                const crash = {
                    time: new Date().toISOString(),
                    multiplier: multiplier,
                    timestamp: Date.now()
                };
                this.crashes.unshift(crash);
                this.crashes = this.crashes.slice(0, 100); // Keep last 100
                localStorage.setItem('aviator_crashes', JSON.stringify(this.crashes));
                
                this.nextRoundTime = Date.now() + 65000; // ~65s round
                this.updateDisplay();
                this.renderChart();
                console.log(`üö® CRASH RECORDED: ${multiplier.toFixed(2)}x`);
            }

            analyzePatterns() {
                if (this.crashes.length < 10) return;

                const recent = this.crashes.slice(0, 20);
                const avg = recent.reduce((sum, c) => sum + c.multiplier, 0) / recent.length;
                const lowCrashes = recent.filter(c => c.multiplier < 3).length / recent.length * 100;
                
                // Statistical prediction model (Bayesian-inspired)
                const variance = recent.map(c => Math.pow(c.multiplier - avg, 2)).reduce((a,b)=>a+b)/recent.length;
                const predicted = Math.max(1.2, avg * (1 - (lowCrashes/100)*0.3 + (Math.random()-0.5)*0.1));
                
                const riskLevel = this.getRiskLevel(predicted, recent);
                this.updatePrediction(predicted, riskLevel, variance);
            }

            getRiskLevel(pred, history) {
                const recentLow = history.slice(0,5).filter(c => c.multiplier < 2.5).length;
                if (recentLow >= 3) return 'SAFE (1.5-2.0x)';
                if (pred < 2.0) return 'RISKY (<2.0x)';
                return 'NEUTRAL (2.0-3.5x)';
            }

            updatePrediction(mult, risk, confidence) {
                document.getElementById('predMult').textContent = `${mult.toFixed(2)}x`;
                document.getElementById('predConfidence').textContent = `Confidence: ${(1-confidence/10).toFixed(0)}%`;
                document.getElementById('predRisk').textContent = risk;
                
                const card = document.getElementById('currentPred');
                card.className = `pred-card ${risk.includes('SAFE') ? 'safe' : risk.includes('RISKY') ? 'risky' : 'neutral'}`;
            }

            updateDisplay() {
                document.getElementById('crashCount').textContent = this.crashes.length;
                
                if (this.crashes.length) {
                    const avg = this.crashes.reduce((sum, c) => sum + c.multiplier, 0) / this.crashes.length;
                    const recentAvg = this.crashes.slice(0,10).reduce((sum, c) => sum + c.multiplier, 0) / 10;
                    const lowPct = this.crashes.filter(c => c.multiplier < 3).length / this.crashes.length * 100;
                    
                    document.getElementById('avgCrash').textContent = `${avg.toFixed(2)}x`;
                    document.getElementById('recentAvg').textContent = `${recentAvg.toFixed(2)}x`;
                    document.getElementById('lowCrashPct').textContent = `${lowPct.toFixed(0)}%`;
                }

                if (this.nextRoundTime) {
                    const eta = new Date(this.nextRoundTime);
                    document.getElementById('nextETA').textContent = eta.toLocaleTimeString('en-GB', {hour: '2-digit', minute: '2-digit'});
                }

                this.renderHistory();
            }

            renderChart() {
                const chart = document.getElementById('crashChart');
                chart.innerHTML = '';
                
                const maxHeight = 280;
                const scale = maxHeight / 25; // Scale to 25x max
                
                this.crashes.slice(0, 50).forEach((crash, i) => {
                    const height = Math.min(crash.multiplier * scale, maxHeight);
                    const point = document.createElement('div');
                    point.className = `crash-point ${i < 5 ? 'recent' : ''}`;
                    point.style.height = height + 'px';
                    point.style.background = `hsl(${120 - crash.multiplier * 5}, 100%, 50%)`;
                    point.title = `${crash.multiplier.toFixed(2)}x`;
                    point.style.right = (i * 3) + 'px';
                    chart.appendChild(point);
                });
            }

            renderHistory() {
                const list = document.getElementById('crashHistory');
                list.innerHTML = this.crashes.slice(0, 20).map(crash => {
                    const multClass = crash.multiplier < 3 ? 'mult-low' : 'mult-high';
                    const time = new Date(crash.time).toLocaleTimeString('en-GB');
                    return `<div class="history-item">
                        <span>${time}</span>
                        <span class="${multClass}">${crash.multiplier.toFixed(2)}x</span>
                    </div>`;
                }).join('');
            }
        }

        // Global functions
        const predictor = new AviatorPredictor();

        function forceSync() {
            predictor.recordCrash(Math.random() * 20 + 1);
        }

        function logCashout() {
            alert('Cashout logged! Track your manual cashouts vs predictions.');
        }

        function clearData() {
            if (confirm('Clear all crash data?')) {
                localStorage.removeItem('aviator_crashes');
                location.reload();
            }
        }

        function exportData() {
            const csv = 'Time,Multiplier\n' + predictor.crashes.map(c => 
                `${new Date(c.time).toISOString()},"${c.multiplier}"`
            ).join('\n');
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `aviator_crashes_${new Date().toISOString().slice(0,10)}.csv`;
            a.click();
        }
    </script>
</body>
</html>
